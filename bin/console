#!/usr/bin/env ruby

require "bundler/setup"
require "dotenv"
require "irb"
require "tweetkit"
require "twitter_mock"

BASE_ENV_FILE_PATH = ".env"

# You can add fixtures and/or initialization code here to make experimenting
# with your gem easier. You can also use a different console, if you like.

# (If you use this, don't forget to add pry to your Gemfile!)
# require "pry"
# Pry.start

Dotenv.load(BASE_ENV_FILE_PATH)

PUBLIC_TWEET_ID_1 = 1212092628029698048
PUBLIC_TWEET_ID_2 = 1199786642791452673

def reload!
  puts 'Reloading ...'
  # Main project directory.
  root_dir = File.expand_path('..', __dir__)
  # Directories within the project that should be reloaded.
  reload_dirs = %w{lib}
  # Loop through and reload every file in all relevant project directories.
  reload_dirs.each do |dir|
    Dir.glob("#{root_dir}/#{dir}/**/*.rb").each { |f| load(f) }
  end
  # Return true when complete.
  true
end

def client
  @client ||= Tweetkit::Client.new(bearer_token: ENV["BEARER_TOKEN"])
end

def tweet
  @tweet ||= client.tweet(PUBLIC_TWEET_ID_1, all_public_fields_and_expansions: true)
end

def tweets
  @tweets ||= client.tweets([PUBLIC_TWEET_ID_1, PUBLIC_TWEET_ID_2], all_public_fields_and_expansions: true)
end

IRB.start(__FILE__)
